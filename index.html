<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Node-ipip by ChiChou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Node-ipip</h1>
      <h2 class="project-tagline">Node. js reader driver for ip database provided by ipip.net</h2>
      <a href="https://github.com/ChiChou/node-ipip" class="btn">View on GitHub</a>
      <a href="https://github.com/ChiChou/node-ipip/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ChiChou/node-ipip/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="node-ipip---" class="anchor" href="#node-ipip---" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>node-ipip <a href="https://travis-ci.org/ChiChou/node-ipip"><img src="https://travis-ci.org/ChiChou/node-ipip.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/ChiChou/node-ipip"><img src="https://img.shields.io/coveralls/ChiChou/node-ipip.svg" alt="Coverage Status"></a> <a href="http://badge.fury.io/js/ipip"><img src="https://badge.fury.io/js/ipip.svg" alt="npm version"></a>
</h1>

<p><a href="README.en.md">English Document</a></p>

<p>适用于 Node.js 的 <a href="http://ipip.net">ipip.net</a> IP 数据库查询模块。</p>

<h2>
<a id="入门" class="anchor" href="#%E5%85%A5%E9%97%A8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>入门</h2>

<p>安装依赖项</p>

<pre><code>npm install ipip
</code></pre>

<p><a href="http://s.qdcdn.com/17mon/17monipdb.dat">IP 地址库</a> 由 ipip.net（原 17mon） 提供，您可以手动下载最新的文件到库所在目录，也可以在库所在目录直接使用 <code>npm run installdb</code>命令下载安装。</p>

<p>代码示例</p>

<pre><code>var ipInfo = require('ipip')();

// 查询 IP 信息，以字典格式返回
console.log(ipInfo('202.195.161.30'));
</code></pre>

<h2>
<a id="文档" class="anchor" href="#%E6%96%87%E6%A1%A3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>文档</h2>

<h3>
<a id="加载数据库" class="anchor" href="#%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>加载数据库</h3>

<p>require('ipip')([database])</p>

<p>加载 database 指向的数据库，支持 dat 和 datx 格式。默认为免费版的 17monipdb.dat。</p>

<p>例：</p>

<pre><code>require('ipip')('/path/to/your/database.datx')
require('ipip')({data: '/path/to/file', version: 'datx'})
</code></pre>

<p><strong>注意</strong>：加载数据库是一个阻塞调用。</p>

<h3>
<a id="查-ip" class="anchor" href="#%E6%9F%A5-ip" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>查 IP</h3>

<p>ip(ip [, format])</p>

<p><strong>ip</strong></p>

<p>待查询的 IP 地址，如 <code>8.8.8.8</code></p>

<p>例：</p>

<pre><code>var ip = require('ipip')();
console.log(ip('8.8.8.8'));
</code></pre>

<p><strong>format</strong> </p>

<p>制定返回数据的格式，可设置为 <code>array</code> 或者 <code>dict</code>。 </p>

<ul>
<li>免费版（dat 格式）数据包含国家、省份、城市；</li>
<li>收费版包含国家、省份、城市、组织、运营商、经度、纬度、时区、行政区域代码。</li>
</ul>

<p>例：</p>

<pre><code>console.log(ip('8.8.8.8', ip.FORMAT_DICT));
</code></pre>

<p>设为 <code>array</code>（缺省）时返回格式如下：</p>

<pre><code>['国家', '省份', '城市']
</code></pre>

<p>设为 <code>dict</code> 时返回格式如下：</p>

<pre><code>{
  country: '国家',
  province: '省份',
  city: '城市'
}
</code></pre>

<h2>
<a id="命令行小工具" class="anchor" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B0%8F%E5%B7%A5%E5%85%B7" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>命令行小工具</h2>

<p>安装位全局模块之后，可以在命令行中使用 <code>ipip</code> 快速查询 IP 信息：</p>

<pre><code>➜  ~ ipip 8.8.8.8 202.195.161.30
Information for 8.8.8.8:
country: GOOGLE
province: GOOGLE
city: N/A

Information for 202.195.161.30:
country: 中国
province: 江苏
city: 镇江
</code></pre>

<h2>
<a id="授权" class="anchor" href="#%E6%8E%88%E6%9D%83" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>授权</h2>

<p>MIT</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ChiChou/node-ipip">Node-ipip</a> is maintained by <a href="https://github.com/ChiChou">ChiChou</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
